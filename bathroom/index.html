<html>

<head>
  <title>Bathroom Designer</title>
  <link rel="icon" href="icon.png">
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.7.13/fabric.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
  <script src="sprite.class.js"></script> 
</head>

<body>
  <div id="title">
    <img src="images/title.png" style="width:1000px;">
    <button onclick="start()">Start</button>
  </div>
  <div id="content">
    <div id="menu">
      <div id="items">
        <h1>Add items to your bathroom. Click to move them around.</h1>
        <img src="images/toliet paper.png" style="width:50px;" onclick="newItem('toliet paper.png')">
        <img src="images/plunger.png" onclick="newItem('plunger.png')">
        <img src="images/eggplant.png" onclick="newItem('eggplant.png')">
        <img src="images/bow.png" onclick="newItem('bow.png')">
        <br />
        <img src="images/duck.png" onclick="newItem('duck.png')">
        <img src="images/plant.png" onclick="newItem('plant.png')">
        <img src="images/stawberry.png" onclick="newItem('stawberry.png')">
        <img src="images/happyface.png" style="width:60px;" onclick="newItem('happyface.png')">
        <br />
        <img class="sticker" src="images/flower.png" onclick="newItem('flower.png')">
        <img class="sticker" src="images/star.png" onclick="newItem('star.png')">
        <img class="sticker" src="images/heart.png" onclick="newItem('heart.png')">
      </div>
      <button onclick="end()">Done</button>
      <br />
      <button onclick="reset()">Reset</button>
    </div>
    <div id="canvas">
      <canvas id="c" width='552' height="650"></canvas>
    </div>
    <div id="end">
      <h1>That's a nice bathroom.</h1>
      <button onclick="reset()">Play again?</button>
    </div>
  </div>
</body>
</html>

<script>
  function start() {
    document.getElementById("title").style.display = "none";
    document.getElementById("content").style.display = "block";
  }
  function drawStart() {
    fabric.Image.fromURL('images/background.png', function (img) {
      canvas.add(img.set({ left: 0, top: 0, originX: 'left', originY: "top", selectable: false }).scale(.6));
    });
    fabric.Image.fromURL('images/toilet.png', function (img) {
      (canvas.add(img.set({ left: 180, top: 110, originX: 'left', originY: "top", selectable: false }).scale(.6)).bringToFront());
    });
  }

  function getRandomInt(max) {
    return Math.floor(Math.random() * max);
  }

  function newItem(url) {
    fabric.Image.fromURL('images/' + url, function (img) {
      canvas.add(img.set({
        left: getRandomInt(500), top: getRandomInt(600), originX: 'left', originY: "top", hasBorders: false,
        hasControls: false,
        hasRotatingPoint: false, selectable: true
      }).scale(.6));
    });
  }

  function reset() {
    document.getElementById("content").style.display = "block";
    document.getElementById("end").style.display = "none";
    document.getElementById("menu").style.display = "block";
    drawStart();
  }

  function download() {
    var dt = canvas.toDataURL('image/jpeg');
    this.href = dt;
  };

  function end() {
    document.getElementById("menu").style.display = "none";
    document.getElementById("end").style.display = "block";
  }

  var canvas = new fabric.Canvas('c');
  window.onload = drawStart() 

</script>